{
  "PreToolUse": {
    "ralph": {
      "matcher": "(?i)^(ralph|ralph-loop)",
      "prompt": "Before executing ralph command, check if .smite/ralph-state.json exists and status is 'running'. If so, continue from last state instead of starting new session.",
      "enabled": false
    }
  },
  "PostToolUse": {
    "ralph-loop": {
      "matcher": "(?i)ralph-loop.*--prompt|ralph.*\".*\"",
      "prompt": "After ralph execution completes, check .smite/ralph-state.json:\n\nIf status is 'running':\n- Increment iteration counter\n- Update lastActivity timestamp\n- REINVOKE THE SAME PROMPT by returning it as output\n- Block exit from session\n\nIf status is 'completed' or 'failed':\n- Display final summary\n- Allow normal exit\n\nIf status is 'cancelled':\n- Display cancellation message\n- Allow normal exit\n\nIMPORTANT: To continue the loop, you MUST output the exact same prompt that was used to start Ralph. This is what creates the infinite loop until completion.",
      "enabled": true,
      "priority": 100
    }
  },
  "StopHook": {
    "ralph-continue": {
      "matcher": ".*",
      "enabled": false,
      "prompt": "Ralph stop hook - check if we should continue looping by reading .smite/ralph-state.json and returning the original prompt if status is 'running'"
    }
  }
}
